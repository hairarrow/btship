(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return e(1444)}])},1444:function(n,t,e){"use strict";e.r(t),e.d(t,{StateProvider:function(){return n_},ctx:function(){return nS},default:function(){return nH}});var r,i,a,o,c,s,u,l,p,d,f,y,m,h,g,Z,v,x,b=e(828),S=e(5893),_=e(7294),H=e(6042),w=e(9396),k=e(9534),E=e(6305);(r=f||(f={})).Start="GAME_START",r.Finish="GAME_FINISH",r.Reset="GAME_RESET",r.Won="GAME_WON",r.Lost="GAME_LOST",r.StartPlacing="GAME_START_PLACING",r.EndPlacing="GAME_END_PLACING",r.EndTurn="GAME_END_TURN",(i=y||(y={})).Rotate="SHIP_ROTATE",i.Place="SHIP_PLACE",i.CheckPlacement="SHIP_CHECK_PLACEMENT",i.Hit="SHIP_HIT",i.Sink="SHIP_SINK",i.UpdateCoords="SHIP_UPDATE_PLACEMENT",(a=m||(m={})).Create="CREATE_PLAYER",a.UpdateGridCells="UPDATE_PLAYER_CELLS",a.SelectShip="SELECT_SHIP",a.Shoot="PLAYER_SHOOT",a.PlaceAutomatically="PLAYER_PLACE_AUTOMATICALLY",(h||(h={})).Shoot="AI_SHOOT",(o=g||(g={}))[o.HUNT=0]="HUNT",o[o.TARGET=1]="TARGET",(c=Z||(Z={})).Human="HUMAN",c.Computer="AI",c.Virtual="VIRTUAL",(s=v||(v={})).Empty="EMPTY",s.Miss="MISS",s.Ship="SHIP",s.Hit="HIT",s.Sunk="SUNK",s.HoverShip="HOVER",s.InvalidLocation="INVALID",(u=x||(x={}))[u.Vertical=0]="Vertical",u[u.Horizontal=1]="Horizontal";var C=[{size:2,name:"Destroyer"},{size:3,name:"Cruiser"},{size:3,name:"Submarine"},{size:4,name:"Battleship"},{size:5,name:"Aircraft Carrier"}];function A(n){return(0,E.Z)(n).filter(function(n){return n.type===Z.Human})[0]}var z=e(4924),P=function(n){return(0,E.Z)(n).reduce(function(n,t){var e=t.position,r=e.x,i=e.y;return n["".concat(r).concat(i)]=0,n},{})},j=function(n,t){return(0,E.Z)(n).map(function(n){var e=n.position,r=e.x,i=e.y,a=t["".concat(r).concat(i)];return{x:r,y:i,probability:a}}).sort(function(n,t){return t.probability-n.probability})};function T(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=n.ship,r=n.position,i=r.x,a=r.y;return e.positions=(0,E.Z)(Array(e.size)).map(function(e,r){return{position:n.direction===x.Vertical?{x:i,y:a+r}:{x:i+r,y:a},type:t?v.HoverShip:v.Ship}}),e.placed=!0,e}function N(n){var t=(0,E.Z)(n.grid).reduce(function(n,t){return n["".concat(t.position.x,"-").concat(t.position.y)]=t.type,n},{});return!!(n.direction===x.Vertical?n.position.y+n.ship.size<=n.gridSize:n.position.x+n.ship.size<=n.gridSize)&&(0,E.Z)(Array(n.ship.size)).map(function(e,r){return t[n.direction===x.Vertical?"".concat(n.position.x,"-").concat(n.position.y+r):"".concat(n.position.x+r,"-").concat(n.position.y)]}).every(function(n){return[v.Empty,v.HoverShip].includes(n)})}var M=e(8719);M.ZP.initialize("UA-40437460-4");var L=M.ZP;function R(n,t){var e=function(t){var e,r=Array.from(Array(e=n.game.gridSize).keys()).reduce(function(n,t){var r=Array.from(Array(e).keys()).map(function(n){return{position:{x:t,y:n},type:v.Empty}});return(0,E.Z)(n).concat((0,E.Z)(r))},[]),i=(0,E.Z)(C).map(function(n){return{name:n.name,size:n.size,sunk:!1,placed:!1,direction:x.Vertical,position:{x:0,y:0},positions:[]}});return{type:m.Create,player:{fleet:{ships:i,selectedShip:null},grid:r,type:t,shots:[]}}},r=function(n){return(0,E.Z)(n).map(function(n){var t=n.fleet,e=n.grid,r=n.shots,i=(0,k.Z)(n,["fleet","grid","shots"]),a=t.ships,o=(0,E.Z)(a).map(function(n){var t=(0,E.Z)(n.positions).every(function(n){return[v.Hit,v.Sunk].includes(n.type)});return(0,w.Z)((0,H.Z)({},n),{sunk:t,positions:(0,E.Z)(n.positions).map(function(n){return(0,w.Z)((0,H.Z)({},n),{type:t?v.Sunk:n.type})})})}),c=(0,E.Z)(o).reduce(function(n,t){var e=t.positions;return(0,E.Z)(n).concat((0,E.Z)(e))},[]),s=(0,E.Z)(e).reduce(function(n,t){var e=t.position,i=(0,k.Z)(t,["position"]);return(0,E.Z)(n).concat([(0,w.Z)((0,H.Z)({},i),{position:{x:e.x,y:e.y},type:(0,E.Z)(c).map(function(n){var t=n.position,e=t.x,r=t.y;return"".concat(e,"-").concat(r)}).includes("".concat(e.x,"-").concat(e.y))?(0,E.Z)(c).filter(function(n){var t=n.position,r=t.x,i=t.y;return"".concat(r,"-").concat(i)==="".concat(e.x,"-").concat(e.y)})[0].type:(0,E.Z)(r).map(function(n){return n.x===e.x&&n.y===e.y}).some(Boolean)?v.Miss:i.type===v.Miss||i.type===v.Hit||i.type===v.Sunk?i.type:v.Empty})])},[]);return(0,w.Z)((0,H.Z)({},i),{fleet:(0,w.Z)((0,H.Z)({},t),{ships:o}),grid:s,shots:r})})};return{createPlayer:e,startGame:function(){var r=n.game;[Z.Human,Z.Computer].map(function(n){return t(e(n))});var i=(0,w.Z)((0,H.Z)({},r),{placing:!0,active:!0});return L.event({category:"Player",action:"Started Game"}),{type:f.Start,game:i}},selectShip:function(t){var e=n.players,i=(0,E.Z)(e).filter(function(n){return n.type===Z.Human})[0].fleet,a=i.ships,o=(0,E.Z)(a).filter(function(n){return n.name===t})[0],c=(0,E.Z)(a).map(function(n){var e=n.name,r=(0,k.Z)(n,["name"]);return(0,w.Z)((0,H.Z)({},r),{name:e,placed:e!==t&&r.placed,positions:e===t?[]:r.positions})}),s=(0,w.Z)((0,H.Z)({},i),{selectedShip:o,ships:c}),u=r((0,E.Z)(e).map(function(n){var t=n.type,e=(0,k.Z)(n,["type"]);return t===Z.Human?(0,w.Z)((0,H.Z)({},e),{fleet:s,type:t}):(0,w.Z)((0,H.Z)({},e),{type:t})}));return{type:m.SelectShip,players:u}},rotateShip:function(){var t=n.players,e=(0,E.Z)(t).filter(function(n){return n.type===Z.Human})[0].fleet,i=e.selectedShip,a=e.ships,o=(0,E.Z)(a).map(function(n){var t=n.name,e=n.direction,r=(0,k.Z)(n,["name","direction"]);return i&&t===i.name?(0,w.Z)((0,H.Z)({},r),{name:t,direction:e===x.Vertical?x.Horizontal:x.Vertical}):(0,w.Z)((0,H.Z)({},r),{name:t,direction:e})}),c={selectedShip:i,ships:o},s=r((0,E.Z)(t).map(function(n){var t=n.type,e=(0,k.Z)(n,["type"]);return t===Z.Human?(0,w.Z)((0,H.Z)({},e),{fleet:c,type:t}):(0,w.Z)((0,H.Z)({},e),{type:t})}));return L.event({category:"Player",action:"Rotate Ship"}),{type:y.Rotate,players:s}},moveShip:function(t,e){var i=n.players,a=n.game.gridSize,o=(0,E.Z)(i).filter(function(n){return n.type===Z.Human})[0],c=o.fleet,s=o.grid,u=c.ships,l=(0,E.Z)(u).filter(function(n){return n.name===t})[0],p={ship:l,grid:s,position:e,gridSize:a,player:Z.Human,direction:l.direction};N(p)&&(l=T(p,!0));var d=(0,E.Z)(u).map(function(n){return n.name===t?l:n}),f=r((0,E.Z)(i).map(function(n){return n.type===Z.Human?(0,w.Z)((0,H.Z)({},n),{fleet:(0,w.Z)((0,H.Z)({},n.fleet),{ships:d})}):n}));return{type:y.UpdateCoords,players:f}},manualPlaceShip:function(t,e){var i=n.players,a=n.game.gridSize,o=A(i),c=o.fleet,s=o.grid,u=c.ships,l=(0,E.Z)(u).filter(function(n){return n.name===t})[0],p={ship:l,grid:s,position:e,gridSize:a,player:Z.Human,direction:l.direction},d=N(p);l=d?T(p):(0,w.Z)((0,H.Z)({},l),{placed:!1,positions:[]});var f=(0,E.Z)(u).map(function(n){return n.name===t?l:n}),m=r((0,E.Z)(i).map(function(n){return n.type===Z.Human?(0,w.Z)((0,H.Z)({},n),{fleet:{selectedShip:d?null:n.fleet.selectedShip,ships:f}}):n}));return L.event({category:"Player",action:"Manually Placed Ship"}),{type:y.UpdateCoords,players:m}},removeSelectedShip:function(){var t=n.players,e=(0,E.Z)(t).filter(function(n){return n.type===Z.Human})[0].fleet,i=e.selectedShip,a=e.ships,o=(0,E.Z)(a).map(function(n){var t=n.name,e=(0,k.Z)(n,["name"]);return i&&t===i.name?(0,w.Z)((0,H.Z)({},e),{name:t,positions:[]}):(0,w.Z)((0,H.Z)({},e),{name:t})}),c={selectedShip:i,ships:o},s=r((0,E.Z)(t).map(function(n){var t=n.type,e=(0,k.Z)(n,["type"]);return t===Z.Human?(0,w.Z)((0,H.Z)({},e),{fleet:c,type:t}):(0,w.Z)((0,H.Z)({},e),{type:t})}));return{type:y.UpdateCoords,players:s}},finishPlacing:function(){return{type:f.EndPlacing}},shoot:function(t,e){var i,a,o,c,s,u,l,p,d,f,y,h,x,b=n.players,S=(0,E.Z)(b).filter(function(n){return n.type===t})[0],_=S.fleet.ships,k=S.shots,C=(0,E.Z)(_).map(function(n){return n.positions=(0,E.Z)(n.positions).map(function(n){return n.position.x===e.x&&n.position.y===e.y?(0,w.Z)((0,H.Z)({},n),{type:v.Hit}):n}),n.sunk=n.positions.every(function(n){return n.type===v.Hit}),n}),T=(0,E.Z)(k).concat([e]),N=(0,E.Z)(b).map(function(n){return n.type===t?(0,w.Z)((0,H.Z)({},n),{fleet:(0,w.Z)((0,H.Z)({},n.fleet),{ships:C}),shots:T}):(0,H.Z)({},n)});L.event({category:"Player",action:"Player Shot"});var M=r((n.game.gridSize,i=A(N).grid,a=(0,E.Z)(i).map(function(n){return n.type===v.Ship?(0,w.Z)((0,H.Z)({},n),{type:v.Empty}):n}),o=A(N).fleet.ships.filter(function(n){return!n.sunk}),c=(0,E.Z)(o).map(function(n){return n.size}).sort()[0],s=(0,E.Z)(o).some(function(n){return n.positions.some(function(n){return n.type===v.Hit})})?g.TARGET:g.HUNT,u=(0,E.Z)(a).filter(function(n){return n.type===v.Empty}).reduce(function(n,t){var e=t.position,r=e.x,i=e.y;return n[i]?n[i][n[i].length-1].start.y===i&&n[i][n[i].length-1].end.x+1===r?n[i][n[i].length-1].end.x=r:n[i].push({start:{x:r,y:i},end:{x:r,y:i}}):n[i]=[{start:{x:r,y:i},end:{x:r,y:i}}],n},{}),p=Object.keys(l=(0,E.Z)(a).filter(function(n){return n.type===v.Empty}).reduce(function(n,t){var e=t.position,r=e.x,i=e.y;return n[r]?n[r][n[r].length-1].start.x===r&&n[r][n[r].length-1].end.y+1===i?n[r][n[r].length-1].end.y=i:n[r].push({start:{x:r,y:i},end:{x:r,y:i}}):n[r]=[{start:{x:r,y:i},end:{x:r,y:i}}],n},{})).reduce(function(n,t){var e=(0,E.Z)(l[t]).map(function(n){return(0,w.Z)((0,H.Z)({},n),{size:n.end.y-n.start.y+1})});return(0,E.Z)(n).concat((0,E.Z)(e))},[]),d=Object.keys(u).reduce(function(n,t){var e=(0,E.Z)(u[t]).map(function(n){return(0,w.Z)((0,H.Z)({},n),{size:n.end.x-n.start.x+1})});return(0,E.Z)(n).concat((0,E.Z)(e))},[]),f=(0,E.Z)(d).concat((0,E.Z)(p)).filter(function(n){return n.size&&n.size>=c}),y=s===g.HUNT?function(n,t,e){var r=P(n),i=!0,a=!1,o=void 0;try{for(var c,s=t[Symbol.iterator]();!(i=(c=s.next()).done);i=!0)!function(){for(var n=c.value,t=n.size,i=n.start,a=n.end,o=(0,E.Z)(e).filter(function(n){return n.size<=t}),s=i.x===a.x?"x":"y",u=i.x===a.x?"y":"x",l=0;l<t;l++){var p=!0,d=!1,f=void 0;try{for(var y,m=(0,E.Z)(o).filter(function(n){return n.size<=t-l})[Symbol.iterator]();!(p=(y=m.next()).done);p=!0)for(var h=y.value,g=0;g<=h.size;g++){var Z="x"===s?i[s]:i[u]+g+l,v="x"===s?i[u]+g+l:i[s],x="".concat(Z).concat(v);[Z,v].every(function(n){return n<=8})&&r[x]++}}catch(n){d=!0,f=n}finally{try{p||null==m.return||m.return()}finally{if(d)throw f}}}}()}catch(n){a=!0,o=n}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return j(n,r)[0]}(a,f,o):function(n,t,e){var r=P(n),i=(0,E.Z)(n).reduce(function(n,t){var e=t.position,r=e.x,i=e.y,a=t.type;return n["".concat(r).concat(i)]=a,n},{}),a=(0,E.Z)(n).filter(function(n){return n.type===v.Hit}),o=["x","y"].reduce(function(n,t){var e=!0,r=!1,i=void 0;try{for(var o,c=a[Symbol.iterator]();!(e=(o=c.next()).done);e=!0){var s=o.value.position,u=s.x,l=s.y,p="y"===t?t:"x",d="y"===p?"x":"y";n[t]?n[t].start[p]===s[p]&&n[t].end[d]+1===s[d]&&(n[t].end[d]=s[d],n[t].size=n[t].end[d]-n[t].start[d]):n[t]={start:{x:u,y:l},end:{x:u,y:l}}}}catch(n){r=!0,i=n}finally{try{e||null==c.return||c.return()}finally{if(r)throw i}}return n},{}),c=(0,E.Z)(n).filter(function(n){return(0,E.Z)(a).some(function(t){return n.type===v.Empty&&(n.position.x===t.position.x||n.position.y===t.position.y)&&(n.position.y===t.position.y+1||n.position.y===t.position.y-1||n.position.x===t.position.x+1||n.position.x===t.position.x-1)})}),s=(0,E.Z)(a).reduce(function(n,t){return n.x=(0,E.Z)(n.x).concat([t.position.x]),n.y=(0,E.Z)(n.y).concat([t.position.y]),n},{x:[],y:[]}),u=Object.keys(s).reduce(function(n,t){return"x"===t?n.x=new Set(s.x):n.y=new Set(s.y),n},{x:[],y:[]}),l=(0,E.Z)(["x","y"]).map(function(n){var t=o[n].size||0,e=o[n],r=e.start,i=e.end,a="x"===n?"y":"x",c="x"===a?"y":"x";return!(t<1)&&[r,i].map(function(n,t){var e,r=n[a],i=n[c],o=(e={},(0,z.Z)(e,a,t?r+1:r-1),(0,z.Z)(e,c,i),e);return r>=0&&r<=8&&o}).filter(Boolean)}).filter(Boolean).reduce(function(n,t){return(0,E.Z)(n).concat((0,E.Z)(t))},[]);if(a.length>=2){var p=(0,E.Z)(l).filter(function(n){return i["".concat(n.x).concat(n.y)]===v.Empty});if(0===p.length){var d=[],f=!0,y=!1,m=void 0;try{for(var h,g=u.x.values()[Symbol.iterator]();!(f=(h=g.next()).done);f=!0){var Z=h.value,x=!0,b=!1,S=void 0;try{for(var _,H=u.y.values()[Symbol.iterator]();!(x=(_=H.next()).done);x=!0){var w=_.value;Z<=7&&w<=7&&d.push({x:Z+1,y:w+1}),Z>=1&&w>=1&&d.push({x:Z-1,y:w-1})}}catch(n){b=!0,S=n}finally{try{x||null==H.return||H.return()}finally{if(b)throw S}}}}catch(n){y=!0,m=n}finally{try{f||null==g.return||g.return()}finally{if(y)throw m}}var k=(0,E.Z)(d).filter(function(n){var t=n.x,e=n.y;return i["".concat(t).concat(e)]===v.Empty});return k[Math.floor(Math.random()*k.length)]}return 1===p.length?p[0]:p[Math.floor(Math.random()*p.length)]}var C=(0,E.Z)(t).filter(function(n){return(n.start.x===n.end.x||n.start.y===n.end.y)&&c.some(function(t){return t.position.x===n.start.x})||c.some(function(t){return t.position.y===n.start.y})}),A=!0,T=!1,N=void 0;try{for(var M,L=C[Symbol.iterator]();!(A=(M=L.next()).done);A=!0)for(var R=M.value,G=R.size,I=R.start,O=R.end,U=I.x===O.x?"x":"y",B="x"===U?"y":"x",V=0;V<G;V++){var D=G-(I[B]+V),W=!0,Y=!1,$=void 0;try{for(var F,K=(0,E.Z)(e).filter(function(n){return n.size<=D})[Symbol.iterator]();!(W=(F=K.next()).done);W=!0)for(var X=F.value,q=0;q<=X.size;q++){var J="x"===U?I[U]:I[B]+q+V,Q="x"===U?I[B]+q+V:I[U],nn="".concat(J).concat(Q);[J,Q].every(function(n){return n<=8})&&r[nn]++}}catch(n){Y=!0,$=n}finally{try{W||null==K.return||K.return()}finally{if(Y)throw $}}}}catch(n){T=!0,N=n}finally{try{A||null==L.return||L.return()}finally{if(T)throw N}}return j(c,r)[0]}(a,f,o)||(0,E.Z)(a).map(function(n){var t=n.type,e=n.position,r=e.x,i=e.y;return t===v.Empty&&{x:r,y:i}}).filter(Boolean)[0],h=(0,E.Z)(i).map(function(n){return n.position.x===y.x&&n.position.y===y.y?(0,w.Z)((0,H.Z)({},n),{type:n.type===v.Ship?v.Hit:v.Miss}):n}),x=(0,E.Z)(o).map(function(n){var t=(0,E.Z)(n.positions).map(function(n){return y.x===n.position.x&&y.y===n.position.y?(0,w.Z)((0,H.Z)({},n),{type:v.Hit}):n});return(0,w.Z)((0,H.Z)({},n),{positions:t})}),(0,E.Z)(N).map(function(n){return n.type===Z.Human?(0,w.Z)((0,H.Z)({},n),{grid:h,fleet:(0,w.Z)((0,H.Z)({},n.fleet),{ships:x})}):(0,w.Z)((0,H.Z)({},n),{grid:N.filter(function(n){return n.type===Z.Computer})[0].grid})})));return{type:m.Shoot,players:M}},placeAutomatically:function(t){var e,i,a,o,c,s,u,l,p=r((e=n.players,i=n.game,o=(a=(0,E.Z)(e).filter(function(n){return n.type===t})[0]).fleet.ships,c=a.grid,s=(0,E.Z)(c),u=(0,E.Z)(o).map(function(n){for(var e=!0,r=n;e;){var a={ship:n,direction:Math.floor(2*Math.random()),grid:s,player:t,position:{x:Math.floor(i.gridSize*Math.random()),y:Math.floor(i.gridSize*Math.random())},gridSize:i.gridSize};N(a)&&(r=T(a),s=function(n){var t=n.ship,e=n.grid;return t.positions.map(function(n){var t=n.position,r=t.x,i=t.y,a=n.type;return e=e.map(function(n){return n.position.x===r&&n.position.y===i?(0,w.Z)((0,H.Z)({},n),{type:a}):n}),!1}),e}((0,w.Z)((0,H.Z)({},a),{ship:r})),e=!1)}return r}),l={grid:s,ships:u},(0,E.Z)(e).map(function(n){return n.type===t?(0,H.Z)({},n,l):n})));return L.event({category:"Player",action:"Place Automatically"}),{type:m.PlaceAutomatically,players:p}},gameOver:function(t){var e=(0,w.Z)((0,H.Z)({},n.game),{over:!0,inBattle:!1,winner:t}),r=t===Z.Human?f.Won:f.Lost,i=(0,w.Z)((0,H.Z)({},n.stats),{games:(0,w.Z)((0,H.Z)({},n.stats.games),{played:n.stats.games.played++,won:t===Z.Human?n.stats.games.won++:n.stats.games.won})});return L.event({category:"Game Over",action:"".concat(t===Z.Human?"Human":"AI"," Wins")}),{type:r,game:e,stats:i}},resetGame:function(){return{type:f.Reset}}}}var G={stats:{shots:{taken:0,hit:0},total:{shots:0,hits:0},games:{played:0,won:0}},game:{gridSize:9,active:!1,placing:!1,inBattle:!1,playerTurn:Z.Human,over:!1,winner:null},players:[],ai:{mode:g.HUNT}},I=e(7297),O=e(63);function U(){var n=(0,I.Z)(['\n  @import url("https://fonts.googleapis.com/css?family=Anton&display=swap");\n  min-width: 100vw;\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  color: ',';\n  font-size: 3vh;\n\n  h1 {\n    font-size: 1em;\n    font-family: "Anton", sans-serif;\n    opacity: 0.9;\n    letter-spacing: 2px;\n  }\n\n  h2 {\n    font-size: 0.5em;\n    margin: 1em 0;\n    opacity: 0.8;\n  }\n\n  button {\n    padding: 0.6em 2em;\n    font-size: 0.5em;\n  }\n\n  @media (',") {\n    font-size: 5vh;\n  }\n\n  @media (",") {\n    font-size: 8vh;\n  }\n"]);return U=function(){return n},n}var B=O.ZP.section(U(),function(n){return n.theme.colors.text},function(n){return n.theme.breakpoints.medium},function(n){return n.theme.breakpoints.large}),V=e(6637);function D(){var n=(0,I.Z)(["\n  background: ","\n  padding: 8px 24px;\n  min-height: 48px;\n  font-size: 18px;\n  font-weight: 500;\n  font-family: inherit;\n  appearance: none;\n  border: none;\n  border-radius: 8px;\n  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.1),\n    0 2px 8px rgba(0, 0, 0, 0.2);\n  color: inherit;\n  transition: background 200ms ease;\n  cursor: pointer;\n\n  &:hover {\n    background: ","\n  }\n\n  &:active, &:focus {\n    outline: 0;\n    box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.1),\n      0 2px 16px 4px ",";\n  }\n\n  &[disabled] {\n    opacity: 0.2;\n  }\n\n"]);return D=function(){return n},n}var W=O.ZP.button(D(),function(n){return n.theme.colors.accent},function(n){var t=n.theme;return(0,V.$n)(.1,t.colors.accent)},function(n){var t=n.theme;return(0,V.$n)(.1,t.colors.accent)}),Y=function(n){var t=n.children,e=n.onClick,r=n.disabled,i=n.style;return(0,S.jsx)(W,{style:i,disabled:r,onClick:e,children:t})},$=function(){var n=(0,_.useContext)(nS),t=n.dispatch,e=n.actions.startGame;return(0,S.jsxs)(B,{children:[(0,S.jsx)("h1",{className:"title",children:"BattleBoats"}),(0,S.jsx)("h2",{children:"Can you beat the computer?"}),(0,S.jsx)(Y,{onClick:function(){return t(e())},children:"Start"})]})};function F(){var n=(0,I.Z)(["\n  position: relative;\n  display: grid;\n  grid-template-columns: ",";\n  grid-template-rows: ",";\n\n  // border: 8px solid rgba(0, 0, 0, 0.2);\n  border-radius: 16px;\n  margin-top: ",";\n  margin-bottom: ",";\n"]);return F=function(){return n},n}var K=O.ZP.div(F(),function(n){var t=n.gridSize,e=n.gridHeight;return(0,E.Z)(Array(t)).map(function(){return"".concat(e/t,"px")}).join(" ")},function(n){var t=n.gridSize,e=n.gridHeight;return(0,E.Z)(Array(t)).map(function(){return"".concat(e/t,"px")}).join(" ")},function(n){return(0,n.theme.spacing)()},function(n){return(0,n.theme.spacing)(3)});function X(){var n=(0,I.Z)(["\n  position: relative;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  color: ","\n  background: ",";\n  z-index: 1000;\n  cursor: pointer;\n  transition: background 120ms ease;\n\n  .cell.odd-cell {\n    background: ","\n  }\n\n  &.odd-cell {\n    background: ",'\n  }\n\n  &:nth-child(-n+9) {\n    border-top: 2px solid rgba(255, 255, 255, .2);\n  }\n\n  &:nth-child(n+73) {\n    border-bottom: 2px solid rgba(255, 255, 255, .2);\n  }\n\n  &:nth-child(9n+1) {\n    border-left: 2px solid rgba(255, 255, 255, .2);\n  }\n\n  &:nth-child(9n-9) {\n    border-right: 2px solid rgba(255, 255, 255, .2);\n  }\n\n  &:nth-child(1) {\n    border-top-left-radius: 8px;\n  }\n\n  &:nth-child(9) {\n    border-top-right-radius: 8px;\n  }\n\n  &:nth-child(73) {\n    border-bottom-left-radius: 8px;\n  }\n\n  &:nth-child(81) {\n    border-bottom-right-radius: 8px;\n  }\n\n  &:hover:after {\n    content: "";\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: #000;\n    opacity: ',";\n  }\n"]);return X=function(){return n},n}function q(n,t){switch(n){case v.Sunk:return(0,V.$n)(.01,"#000");case v.Ship:return(0,V.$n)(.01,t.colors.main);case v.Hit:return(0,V.$n)(.01,t.colors.accent);case v.Miss:return"rgba(255, 255, 255, 0.7)";case v.HoverShip:return"rgba(0, 0, 0, 0.2)";case v.Empty:default:return"rgba(255, 255, 255, 0.2)"}}var J=O.ZP.div(X(),function(n){return n.theme.colors.main},function(n){return function(n,t){switch(n){case v.Sunk:return"#000";case v.Ship:return t.colors.main;case v.Hit:return t.colors.accent;case v.Miss:return"rgba(255, 255, 255, 0.8)";case v.HoverShip:return"rgba(0, 0, 0, 0.2)";case v.Empty:default:return"rgba(255, 255, 255, 0.3)"}}(n.type,n.theme)},function(n){return q(n.type,n.theme)},function(n){return q(n.type,n.theme)},function(n){var t=n.type;return[v.Empty,v.Ship].includes(t)?.1:0}),Q=function(n){var t=n.cell.position,e=t.x,r=t.y,i=n.odd,a=n.type,o=n.canBeAttacked,c=(0,_.useContext)(nS),s=c.state,u=s.game.placing,l=s.players,p=c.actions,d=p.moveShip,f=p.manualPlaceShip,y=p.selectShip,m=p.shoot,h=c.dispatch,g=(0,_.useCallback)(function(){if(u){var n=A(l).fleet.selectedShip;n&&h(d(n.name,{x:e,y:r}))}},[u,d,l,e,r,h]),x=(0,_.useCallback)(function(){if(u){var n=A(l).fleet,t=n.selectedShip,i=n.ships;a===v.Ship&&h(y((0,E.Z)(i).map(function(n){return{name:n.name,positions:n.positions}}).filter(function(n){return n.positions.map(function(n){var t=n.position;return"".concat(t.x,"-").concat(t.y)}).includes("".concat(e,"-").concat(r))})[0].name)),t&&h(f(t.name,{x:e,y:r}))}},[u,f,l,e,r,h,y,a]),b=(0,_.useCallback)(function(){[v.Empty,v.Ship].includes(a)&&h(m(Z.Computer,{x:e,y:r}))},[h,m,e,r,a]);return(0,S.jsx)(J,{type:o&&a===v.Ship?v.Empty:a,onMouseEnter:g,onClick:o?b:x,className:"cell ".concat(i?"odd-cell":"")})},nn={mobile:376,small:448,medium:672,large:896,larger:1120,xLarge:1440},nt=Object.entries(nn).reduce(function(n,t){var e=(0,b.Z)(t,2),r=e[0],i=e[1];return n[r]="".concat(i,"px"),n},{}),ne={mobile:"min-width: ".concat(nt.mobile),small:"min-width: ".concat(nt.small),medium:"min-width: ".concat(nt.medium),large:"min-width: ".concat(nt.large),larger:"min-width: ".concat(nt.larger),xLarge:"min-width: ".concat(nt.xLarge)};function nr(){var n=function(){var n=window.innerWidth||void 0,t=window.innerHeight||void 0,e=Object.entries(nn).reduce(function(t,e){var r=(0,b.Z)(e,2),i=r[0],a=r[1];return t["is".concat(i.charAt(0).toUpperCase()).concat(i.slice(1))]=!!n&&n<a,t},{});return(0,H.Z)({width:n,height:t,isLandscape:n&&t&&t>n},e)},t=(0,b.Z)((0,_.useState)(n),2),e=t[0],r=t[1];return(0,_.useEffect)(function(){var t=function(){r(n())};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}},[!0]),e}var ni=function(n){var t=n.grid,e=n.canBeAttacked,r=(0,k.Z)(n,["grid","canBeAttacked"]),i=(0,_.useRef)(null),a=nr(),o=a.height,c=a.isLandscape,s=(0,b.Z)((0,_.useState)(0),2),u=s[0],l=s[1];(0,_.useEffect)(function(){var n=i.current&&i.current.getBoundingClientRect().width||300,t=i.current&&i.current.getBoundingClientRect().height||300;l(n>=600?600:n),t<n?l(t):l(n)},[c,o,i]);var p=(0,_.useContext)(nS),d=p.state.game.gridSize,f=p.actions.removeSelectedShip,y=p.dispatch;return(0,S.jsx)(K,(0,w.Z)((0,H.Z)({ref:i,gridSize:d,onMouseLeave:function(){return y(f())},gridHeight:u},r),{children:t.map(function(n,t){return(0,S.jsx)(Q,{cell:n,type:n.type,canBeAttacked:e,odd:t%2==0},"".concat(n.position.x).concat(n.position.y))})}))},na=e(8453),no=function(n){var t=function(){return(0,S.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:y.map(function(n){var t=n.name,e=n.size,r=n.placed;return(0,S.jsxs)(Y,{disabled:r,onClick:function(){return z(t)},style:{marginTop:16},children:[t," – ",e]},t)})})},e=function(){return(0,S.jsx)(Y,{style:{marginRight:16},disabled:!(0,E.Z)(y).every(function(n){return n.placed}),onClick:function(){d(p(Z.Computer)),d(l())},children:"Start the Battle"})},r=n.player,i=(0,k.Z)(n,["player"]),a=(0,_.useContext)(nS),o=a.state.players,c=a.actions,s=c.selectShip,u=c.rotateShip,l=c.finishPlacing,p=c.placeAutomatically,d=a.dispatch,f=(0,E.Z)(o).filter(function(n){return n.type===r})[0].fleet,y=f.ships,m=f.selectedShip,h=nr().isLarge,g=(0,b.Z)((0,_.useState)(!1),2),v=g[0],x=g[1],C=(0,_.useCallback)(function(){x(!0)},[]),A=(0,_.useCallback)(function(){x(!1)},[]),z=(0,_.useCallback)(function(n){d(s(n)),A()},[A,d,s]);return(0,S.jsxs)("div",(0,w.Z)((0,H.Z)({},i),{children:[m?(0,S.jsx)("div",{children:(0,S.jsx)(Y,{style:{marginBottom:16},onClick:function(){return d(u())},children:"Rotate"})}):"",(0,E.Z)(y).every(function(n){return n.placed})&&h&&e(),!h&&e(),(0,S.jsx)(Y,{onClick:function(){return d(p(Z.Human))},children:"Place Randomly"}),(0,S.jsx)("h2",{style:{marginTop:24},children:"Fleet"}),h?(0,S.jsx)(na.Z,{title:"Select a Ship",placement:"bottom",onClose:A,visible:v,height:500,closable:!0,children:t()}):t(),h&&(0,S.jsx)(Y,{onClick:C,children:"Select a Ship"})]}))},nc=e(872),ns=e(7874),nu=function(n){var t=(0,nc.Z)({},(0,ns.Z)(n)),e=(0,_.useContext)(nS),r=e.state,i=r.stats,a=r.game,o=e.actions,c=o.resetGame,s=o.startGame,u=e.dispatch;return(0,S.jsxs)("div",(0,w.Z)((0,H.Z)({},t),{children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("h2",{children:"Games Won"}),(0,S.jsxs)("p",{style:{fontWeight:500},children:[i.games.won," of ",i.games.played]})]}),a.over&&(0,S.jsx)(Y,{style:{marginTop:20},onClick:function(){u(c()),u(s())},children:"Reset"})]}))};function nl(){var n=(0,I.Z)(['\n  .board {\n    display: grid;\n    grid-template-areas:\n      "header"\n      "board"\n      "fleet"\n      "stats";\n    grid-template-columns: 1fr;\n    grid-template-rows: auto 1fr auto;\n    grid-row-gap: 24px;\n    min-width: 100vw;\n    min-height: 100vh;\n    position: relative;\n    padding: 24px;\n    color: ',';\n    font-size: 2vh;\n\n    &__title {\n      text-align: center;\n      grid-area: header;\n      grid-column-start: 1;\n      grid-column-end: span 2;\n    }\n\n    &__fleet {\n      grid-area: fleet;\n    }\n\n    &__grid {\n      grid-area: board;\n    }\n\n    &__player-grid {\n      grid-area: player-grid;\n    }\n\n    &__opponent-grid {\n      grid-area: opponent-grid;\n    }\n\n    &__grid,\n    &__player-grid,\n    &__opponent-grid {\n      place-self: stretch stretch;\n      justify-content: center;\n    }\n\n    &__stats {\n      grid-area: stats;\n    }\n\n    &--battle {\n      grid-template-areas:\n        "header"\n        "player-grid"\n        "opponent-grid"\n        "stats";\n      grid-template-rows: auto 120px 1fr auto;\n\n      @media (',') {\n        grid-template-areas:\n          "header header"\n          "player-grid opponent-grid"\n          "stats";\n        grid-column-gap: 24px;\n        grid-template-columns: 1fr 1fr;\n        grid-template-rows: auto 1fr auto;\n\n        .board {\n          &__fleet {\n            justify-content: end;\n          }\n          &__player-grid {\n            grid-row-start: 2;\n            grid-row-end: span 2;\n            grid-column-start: 1;\n            grid-column-end: span 1;\n          }\n\n          &__opponent-grid {\n            grid-row-start: 2;\n            grid-row-end: span 2;\n            grid-column-start: 2;\n            grid-column-end: span 2;\n          }\n        }\n      }\n    }\n\n    &--placing {\n      grid-template-areas:\n        "header"\n        "board"\n        "fleet"\n        "stats";\n\n      @media (',') {\n        grid-template-areas:\n          "header header"\n          "board board"\n          "fleet stats";\n      }\n\n      @media (',') {\n        grid-template-areas:\n          "header header"\n          "fleet board"\n          "stats";\n        grid-column-gap: 24px;\n        grid-template-columns: auto 1fr;\n        grid-template-rows: auto 1fr auto;\n\n        .board {\n          &__grid {\n            grid-row-start: 2;\n            grid-row-end: span 2;\n            grid-column-start: 2;\n          }\n\n          &__fleet {\n            grid-row-start: 2;\n            grid-row-end: span 2;\n          }\n        }\n      }\n    }\n  }\n']);return nl=function(){return n},n}var np=O.ZP.section(nl(),function(n){return n.theme.colors.text},function(n){return n.theme.breakpoints.large},function(n){return n.theme.breakpoints.small},function(n){return n.theme.breakpoints.large}),nd=function(){var n=(0,_.useContext)(nS).state,t=n.game,e=t.placing,r=t.playerTurn,i=n.players;return e?(0,S.jsx)(np,{children:(0,S.jsxs)("div",{className:"board board--placing",children:[(0,S.jsx)("h1",{className:"board__title",children:"Place your ships!"}),(0,S.jsx)(ni,{className:"board__grid",grid:A(i).grid}),(0,S.jsx)(no,{className:"board__fleet",player:Z.Human}),(0,S.jsx)(nu,{className:"board__stats"})]})}):(0,S.jsx)(np,{children:(0,S.jsxs)("div",{className:"board board--battle",children:[(0,S.jsx)(ni,{className:"board__player-grid",grid:A(i).grid}),(0,S.jsx)("h2",{className:"board__title",children:"Sink the Ships!"}),(0,S.jsx)(nu,{className:"board__stats"}),(0,S.jsx)(ni,{className:"board__opponent-grid",grid:(0,E.Z)(i).filter(function(n){return n.type===Z.Computer})[0].grid,canBeAttacked:r===Z.Human})]})})};function nf(){var n=(0,I.Z)(["\n  display: flex;\n  min-height: 100vh;\n  background-color: #3b515f;\n"]);return nf=function(){return n},n}var ny=O.ZP.div(nf()),nm=e(6260);function nh(){var n=(0,I.Z)(["\n  position: fixed;\n  bottom: 0;\n  right: 0;\n  padding: 16px;\n  border-top-left-radius: 8px;\n  background: linear-gradient(\n    to bottom right,\n    rgba(0, 0, 0, 0),\n    rgba(0, 0, 0, 0.2)\n  );\n\n  .link {\n    text-decoration: none;\n    font-weight: 700;\n    color: #fff;\n    opacity: 0.5;\n    transition: opacity 120ms ease;\n  }\n\n  &:hover .link {\n    opacity: 1;\n  }\n"]);return nh=function(){return n},n}var ng=O.ZP.footer(nh()),nZ=function(){return(0,S.jsx)(ng,{children:(0,S.jsxs)("a",{href:"https://hairarrow.dev",target:"_blank",rel:"noopener noreferrer",className:"link",onClick:function(){L.event({category:"Outbound",action:"Visit Website"})},children:["Made with ",(0,S.jsx)("span",{children:"\uD83D\uDE80"})," by Hairarrow"]})})},nv=function(){var n=(0,_.useContext)(nS),t=n.state,e=t.game,r=t.players,i=n.actions,a=i.startGame,o=i.gameOver,c=i.resetGame,s=n.dispatch,u=(0,b.Z)((0,_.useState)({waveHeight:5,waveSpeed:2}),2);return u[0],u[1],(0,_.useEffect)(function(){if(e.inBattle){var n=!0,t=!1,i=void 0;try{for(var u,l=r[Symbol.iterator]();!(n=(u=l.next()).done);n=!0){var p=u.value,d=p.fleet,f=p.type;if(d.ships.every(function(n){return n.sunk})){s(o(f===Z.Human?Z.Computer:Z.Human));var y={title:"You ".concat(f===Z.Human?"Lose":"Win!"),content:"Do you want to try again?",okText:"Try Again",cancelText:"Not Yet",onOk:function(){s(c()),s(a())}};f===Z.Human?nm.Z.confirm(y):nm.Z.success(y)}}}catch(n){t=!0,i=n}finally{try{n||null==l.return||l.return()}finally{if(t)throw i}}}},[e,r,s,o,c,a]),(0,S.jsxs)(ny,{id:"waves",children:[e.active?(0,S.jsx)(nd,{}):(0,S.jsx)($,{}),(0,S.jsx)(nZ,{})]})},nx={spacing:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"".concat(8*n,"px")},colors:{main:"#1b4f8f",accent:"#ff3ea5",text:"#fff"},breakpoints:ne},nb=(0,b.Z)((l=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.Create:return(0,w.Z)((0,H.Z)({},n),{players:(0,E.Z)(n.players).concat([t.player])});case h.Shoot:case y.UpdateCoords:case y.Rotate:case m.SelectShip:case m.UpdateGridCells:case m.PlaceAutomatically:case m.Shoot:return(0,w.Z)((0,H.Z)({},n),{players:t.players});case f.Start:return(0,w.Z)((0,H.Z)({},n),{game:(0,w.Z)((0,H.Z)({},n.game),{placing:t.game.placing,active:t.game.active})});case f.EndPlacing:return(0,w.Z)((0,H.Z)({},n),{game:(0,w.Z)((0,H.Z)({},n.game),{placing:!1,inBattle:!0})});case f.Won:case f.Lost:return(0,w.Z)((0,H.Z)({},n),{game:t.game});case f.Reset:return(0,w.Z)((0,H.Z)({},G),{stats:(0,w.Z)((0,H.Z)({},G.stats),{games:n.stats.games})});default:return(0,H.Z)({},n)}},p=function(){return G},[d=(0,_.createContext)({state:G,dispatch:p,actions:R(G,p)}),function(n){var t=(0,b.Z)((0,_.useReducer)(l,G),2),e=t[0],r=t[1];return(0,S.jsx)(d.Provider,(0,H.Z)({value:{state:e,dispatch:r,actions:R(e,r)}},n))}]),2),nS=nb[0],n_=nb[1],nH=function(){return(0,S.jsx)(n_,{children:(0,S.jsx)(O.f6,{theme:nx,children:(0,S.jsx)(nv,{})})})}}},function(n){n.O(0,[423,446,774,888,179],function(){return n(n.s=8312)}),_N_E=n.O()}]);